<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="PPmoon&#39;s Blog"
  />
  
    
      <title>Mac如何在shell脚本当中获取时间 | PPmoon&#39;s Blog</title>
    
  
  <link rel="stylesheet" href="/css/reset.css"/>
  <link rel="stylesheet" href="/css/smigle.css"/>
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>

  <body>
    <header>
  <div id="brand">
    <div>
      <a href="https://ppmoon.github.io/"><h1>PPmoon&#39;s Blog</h1></a>
    </div>
  </div>
  <nav>
    
      
        
        <a href="/"><b>Home</b></a>
      
         | 
        <a href="/about/"><b>About</b></a>
      
         | 
        <a href="/posts/"><b>Posts</b></a>
      
         | 
        <a href="/categories/"><b>Categories</b></a>
      
         | 
        <a href="/tags/"><b>Tags</b></a>
      
    
  </nav>
  <hr />
</header>

    <div id="content">
      
  <main>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
    <article>
      <h1>Mac如何在shell脚本当中获取时间</h1>
      <div class="post-meta">
  <strong>
    <span>Posted on</span>
    <time>2019-08-26</time>
    <span>in</span>
    
      <a href="/categories/shell">shell</a>
  </strong>
  <span> • 405 words</span>
  <span> • 1 minute read</span>
  
  
    <div>
      <span>Tags:</span>
      
        <a href="/tags/shell">shell</a>
    </div>
  
</div>

      <div><h1 id="mac如何在shell脚本当中获取时间">Mac如何在shell脚本当中获取时间</h1>
<h2 id="获取今天的时间">获取今天的时间</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">date
2019年 8月26日 星期一 14时02分23秒 CST
</code></pre></div><p>直接输入date就可以获取当前的时间（CST时间）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">date -jnRu
Mon, <span style="color:#666">26</span> Aug <span style="color:#666">2019</span> 06:06:29 +0000
</code></pre></div><p>如果加上参数<code>-jnRu</code>会显示格林威治时间(GMT)</p>
<h2 id="时间格式化">时间格式化</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">date +<span style="color:#b44">&#34;%Y-%m-%d %H:%M:%S&#34;</span>
2019-08-26 14:28:14
</code></pre></div><p>格式化数据可以直接使用加号，然后配合日期符号输出
常用日期符号</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>代表意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>%Y</td>
<td>年</td>
</tr>
<tr>
<td>%m</td>
<td>月</td>
</tr>
<tr>
<td>%d</td>
<td>日</td>
</tr>
<tr>
<td>%H</td>
<td>时</td>
</tr>
<tr>
<td>%M</td>
<td>分</td>
</tr>
<tr>
<td>%S</td>
<td>秒</td>
</tr>
</tbody>
</table>
<h2 id="获取昨天的时间">获取昨天的时间</h2>
<p>mac下的date命令计算时间的方法和linux会不太一样</p>
<p>命令参数为<code>[-v[+|-]val[ymwdHMS]]</code></p>
<p>date 后加 -v 加减一个值，最后填写格式化参数格式化输出。都是在当前时间的基础上进行加减运算的</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">date -v-1d +<span style="color:#b44">&#34;%Y-%m-%d&#34;</span>
2019-08-25
date -v-1y +<span style="color:#b44">&#34;%Y-%m-%d&#34;</span>
2018-08-26
date -v+1m +<span style="color:#b44">&#34;%Y-%m-%d&#34;</span>
2019-09-26
date -v+1H +<span style="color:#b44">&#34;%Y-%m-%d %H:%M:%S&#34;</span>
2019-08-26 15:40:36
date -v+1M +<span style="color:#b44">&#34;%Y-%m-%d %H:%M:%S&#34;</span>
2019-08-26 14:41:58
date -v+1S +<span style="color:#b44">&#34;%Y-%m-%d %H:%M:%S&#34;</span>
2019-08-26 14:40:12
</code></pre></div><h2 id="总结">总结</h2>
<p>编写shell脚本执行的时候需要使用到时间，更多关于date命令的使用方法可以使用</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">man date
</code></pre></div><p>进行查看详细的使用方法或者输入一个错误的参数比如</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">date h
date: illegal <span style="color:#a2f">time</span> format
usage: date <span style="color:#666">[</span>-jnRu<span style="color:#666">]</span> <span style="color:#666">[</span>-d dst<span style="color:#666">]</span> <span style="color:#666">[</span>-r seconds<span style="color:#666">]</span> <span style="color:#666">[</span>-t west<span style="color:#666">]</span> <span style="color:#666">[</span>-v<span style="color:#666">[</span>+|-<span style="color:#666">]</span>val<span style="color:#666">[</span>ymwdHMS<span style="color:#666">]]</span> ... 
            <span style="color:#666">[</span>-f fmt date | <span style="color:#666">[[[</span>mm<span style="color:#666">]</span>dd<span style="color:#666">]</span>HH<span style="color:#666">]</span>MM<span style="color:#666">[[</span>cc<span style="color:#666">]</span>yy<span style="color:#666">][</span>.ss<span style="color:#666">]]</span> <span style="color:#666">[</span>+format<span style="color:#666">]</span>
</code></pre></div><p>会提示提示部分使用方法。</p>
</div>
    </article>
    <script async src="https://cdn.jsdelivr.net/npm/mermaid@8.11.5/dist/mermaid.min.js" integrity="sha256-2XLXktqo631mxd0g+wX43tGWiURMz6JYlekFs0J8h2s=" crossorigin="anonymous"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script>
  </main>

    </div>
    <footer>
  <hr />
  
    <p id="social">
      Find me around the web:
      <br />
      
        
        <a href="https://github.com/ppmoon">GitHub</a>
      
    </p>
  
  <p class="copyright">
    Copyright © 2021
    <a href="https://ppmoon.github.io/"><strong>PPmoon</strong></a>.
    This work is licensed under the
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.
  </p>
  <p class="builtWith">
    Built with
    <a href="http://www.gohugo.io/">Hugo</a>,
    using the theme pure,
    which was influenced by the theme
    <a href="https://gitlab.com/ian-s-mcb/smigle-hugo-theme">smigle</a>.
  </p>
</footer>

  </body>
</html>
